{"componentChunkName":"component---src-templates-blog-post-js","path":"/writing/google-fonts-in-gatsby/","result":{"data":{"site":{"siteMetadata":{"title":"Chandler Moisen","author":"Chandler Moisen"}},"markdownRemark":{"id":"de9c9784-63bd-5772-87e2-831ca9f7d6c6","excerpt":"There are a number of ways to use Google Fonts within a Gatsby application. In other platforms, we could simply add  tags to the  file and call it day. However…","html":"<p>There are a number of ways to use <a href=\"https://fonts.google.com/\">Google Fonts</a> within a <a href=\"https://www.gatsbyjs.org/\">Gatsby</a> application. In other platforms, we could simply add <code class=\"language-text\">&lt;link&gt;</code> tags to the <code class=\"language-text\">index.html</code> file and call it day. However, as Gatsby generates the <code class=\"language-text\">index.html</code> during its build process, we are unable to modify the <code class=\"language-text\">index.html</code> file directly. As such, we have to find another way to inject Google Fonts.</p>\n<p>A lot has already been written about <a href=\"http://kyleamathews.github.io/typography.js/\">Typography.js</a>, so this post will compare the pros and cons of three other approaches:</p>\n<ol>\n<li>The Link tag and React Helmet</li>\n<li>The <code class=\"language-text\">gatsby-plugin-google-fonts</code> package</li>\n<li>The <code class=\"language-text\">gatsby-plugin-prefetch-google-fonts</code> package</li>\n</ol>\n<p><strong>Note</strong>: this blog uses the third approach.</p>\n<h2>1. The Link tag and React Helmet</h2>\n<p>The most straight forward approach, and perhaps the approach most similar to placing the Google Font embed link within <code class=\"language-text\">&lt;head&gt;</code>, is to place the embed into a <a href=\"https://github.com/nfl/react-helmet\">React Helmet</a> component.</p>\n<p>React Helmet is a library for managing all of the tags that are rendered within the document head.</p>\n<p>If you used a <a href=\"https://www.gatsbyjs.org/starters/\">Gatsby starter</a>, your project most likely already includes the <code class=\"language-text\">gatsby-plugin-react-helmet</code> library and you do not need to install React Helmet.</p>\n<p>To implement this approach:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// layout.js</span>\n\n<span class=\"token keyword\">import</span> Helmet <span class=\"token keyword\">from</span> <span class=\"token string\">'react-helmet'</span>\n\n<span class=\"token punctuation\">;</span><span class=\"token operator\">&lt;</span>Helmet<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>link\n    href<span class=\"token operator\">=</span><span class=\"token string\">\"https://fonts.googleapis.com/css2?family=Yeseva+One&amp;display=swap\"</span>\n    rel<span class=\"token operator\">=</span><span class=\"token string\">\"stylesheet\"</span>\n  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>link\n    href<span class=\"token operator\">=</span><span class=\"token string\">\"https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;0,700;1,400&amp;display=swap\"</span>\n    rel<span class=\"token operator\">=</span><span class=\"token string\">\"stylesheet\"</span>\n  <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Helmet<span class=\"token operator\">></span></code></pre></div>\n<p><strong>Note</strong>: place this component in a top-level container so that it gets included across the application</p>\n<h3>Pros</h3>\n<ol>\n<li>Straight-forward and familiar if you are new to Gatsby</li>\n</ol>\n<h3>Cons</h3>\n<ol>\n<li>Flash of Invisible Text (FOIT) as the external resource is loaded</li>\n<li>Hard-codes fonts instead of relying on Gatsby’s configuration</li>\n</ol>\n<h2>2. <code class=\"language-text\">gatsby-plugin-google-fonts</code></h2>\n<p><code class=\"language-text\">gatsby-plugin-google-fonts</code> makes use of Gatsby’s plugin ecosystem and configuration to load Google Fonts. In other words, instead of hard-coding your <code class=\"language-text\">link</code> embeds as in the prior approach, you instead would set them within your <code class=\"language-text\">gatsby-config.js</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// gatsby-config.js</span>\n\n<span class=\"token punctuation\">{</span>\n  resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-plugin-google-fonts'</span><span class=\"token punctuation\">,</span>\n  options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    fonts<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">'yeseva one'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">'open sans\\:400,400i,700'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    display<span class=\"token punctuation\">:</span> <span class=\"token string\">'swap'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><strong>Note</strong>: the syntax to load multiple font variants is interesting</p>\n<h3>Pros</h3>\n<ol>\n<li>Leverages Gatsby’s plugin ecosystem</li>\n<li>Keeps configuration within the appropriate config file</li>\n</ol>\n<h3>Cons</h3>\n<ol>\n<li>FOIT as the external resource is loaded</li>\n</ol>\n<h2>3. <code class=\"language-text\">gatsby-plugin-prefetch-google-fonts</code></h2>\n<p>Similar to previous approach, <code class=\"language-text\">gatsby-plugin-prefetch-google-fonts</code> also leverages Gatsby’s configuration settings, but, please be advised:</p>\n<p><strong>THIS PLUGIN IS NO LONGER SUPPORTED BY ITS AUTHOR!</strong></p>\n<p>Which is quite unfortunate as it avoids the FOIT that both of the previous approaches suffer from.</p>\n<p>The Flash of Invisible Text is the result of the browser waiting to load the external font resources while the page loads. While this issue can be mitigated using the <code class=\"language-text\">font-display</code> property, there will still be the slightest flicker as the browser’s fallback font is replaced with the Google font. To read more about FOIT and <code class=\"language-text\">font-display</code> go <a href=\"https://fontsplugin.com/google-fonts-font-display-swap/\">here</a>.</p>\n<p>That said, if you are comfortable using an unsupported library and want to avoid the flashing text issues, then this approach is for you. <code class=\"language-text\">gatsby-plugin-prefetch-google-fonts</code> works by prefetching the font resources during Gatsby’s build process and including these resources in your build.</p>\n<p>To use the plugin, add it to your <code class=\"language-text\">gatsby-config.js</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// gatsby-config.js</span>\n\n<span class=\"token punctuation\">{</span>\n  resolve<span class=\"token punctuation\">:</span> <span class=\"token string\">'gatsby-plugin-prefetch-google-fonts'</span><span class=\"token punctuation\">,</span>\n  options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    fonts<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        family<span class=\"token punctuation\">:</span> <span class=\"token string\">'Yeseva One'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        family<span class=\"token punctuation\">:</span> <span class=\"token string\">'Open Sans'</span><span class=\"token punctuation\">,</span>\n        variants<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'400'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'400i'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'700'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h3>Build Errors</h3>\n<p>Please note that you must correctly capitalize the font family in the configuration file otherwise your build will fail.</p>\n<p>For example, comparing <code class=\"language-text\">&#39;Open Sans&#39;</code> vs. <code class=\"language-text\">&#39;Open sans&#39;</code> - the lower-cased <code class=\"language-text\">sans</code> will cause the prefetching to fail and the following error to show during the build:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b89f695219e64f916da3767a69ab0d6f/d0c2f/gatsby-google-font-error.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABYUlEQVQoz5WSu07FMBBEHb/id+LcPCiAgpIvoadAAulCw/9/wrC2Q0KFdIujsbPxJOtZ9hIF3kaJ10FgUwJOCHRcgFc4hJCEqEgp931DSlVpdVnPsDiMSGNGIA1pQCLNOWMcR3jnEUKAtQ7OOXjvdw11nVJCjOmolfeYpwOyt9DGkRooY9veenT0dcbYbRjeYZICWcldCdmY6NlseihqiXUdun9gbOc5WXw/Jnw9zbjeD/h8zMSE68OE97uAD9LF6Fv+kmHIruJCDx8d4pBpHcFLy3TRUin0vYZSJyUMrftjzfcgmRAc40AmwZCWy4413VJsCbZElVJ7qvJI+2/9aJnTHcZoydBSor4mWNIyFI4lzI7Wupqexm19Gu4tlz9clkB4XKZEumLbNlwuM9Z1rfsyRs3w5LfdYlpqZRarYWlvWRIZJMxzJJ1ovgaaw1zN6mzRi6VNfgz8OfjH3dWWGX4ADAnbOgEvCRUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"gatsby google font build error\"\n        title=\"gatsby google font build error\"\n        src=\"/static/b89f695219e64f916da3767a69ab0d6f/fcda8/gatsby-google-font-error.png\"\n        srcset=\"/static/b89f695219e64f916da3767a69ab0d6f/12f09/gatsby-google-font-error.png 148w,\n/static/b89f695219e64f916da3767a69ab0d6f/e4a3f/gatsby-google-font-error.png 295w,\n/static/b89f695219e64f916da3767a69ab0d6f/fcda8/gatsby-google-font-error.png 590w,\n/static/b89f695219e64f916da3767a69ab0d6f/efc66/gatsby-google-font-error.png 885w,\n/static/b89f695219e64f916da3767a69ab0d6f/c83ae/gatsby-google-font-error.png 1180w,\n/static/b89f695219e64f916da3767a69ab0d6f/d0c2f/gatsby-google-font-error.png 1362w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Pros</h3>\n<ol>\n<li>Avoids the FOIT as resources are included in the Gatsby build</li>\n<li>Leverages Gatsby’s plugin ecosystem</li>\n<li>Keeps configuration withing the appropriate config file</li>\n</ol>\n<h3>Cons</h3>\n<ol>\n<li>Unsupported library</li>\n<li>Potential for build errors</li>\n<li>Unsupported library</li>\n</ol>\n<h2>Conclusion</h2>\n<p>If you made it this far, you just learned three approaches to loading Google Fonts within a Gatsby application.</p>\n<p>The blog that you are reading this on uses the third approach as I like to include the the font resources in the build to avoid fetching them when the document loads causing flashing text.</p>","frontmatter":{"title":"Google Fonts in Gatsby","date":"May 15, 2020","isTIL":null}}},"pageContext":{"slug":"/google-fonts-in-gatsby/","previous":{"fields":{"slug":"/ad-free-new-york-times/"},"frontmatter":{"title":"An Ad-Free Mobile New York Times","redirects":["/ad-free-new-york-times"]}},"next":{"fields":{"slug":"/lessons-as-a-tech-lead/"},"frontmatter":{"title":"Things I've Learned About the Tech Lead Role","redirects":null}}}},"staticQueryHashes":["4173562750","63159454"]}