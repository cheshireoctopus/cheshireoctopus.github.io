{"componentChunkName":"component---src-templates-blog-post-js","path":"/til/testcafe-request-hooks/","result":{"data":{"site":{"siteMetadata":{"title":"Chandler Moisen","author":"Chandler Moisen"}},"markdownRemark":{"id":"aa563d81-0f1e-583c-988c-7e9d9ca22888","excerpt":"Today I learned about intercepting HTTP requests using TestCafe request hooks.I have recently incorporated writing automated end-to-end tests into my workflowâ€¦","html":"<p>Today I learned about intercepting HTTP requests using <a href=\"https://devexpress.github.io/testcafe/documentation/guides/advanced-guides/intercept-http-requests.html\">TestCafe request hooks</a>.</p>\n<p>I have recently incorporated writing automated end-to-end tests into my workflow using <a href=\"https://devexpress.github.io/testcafe/\">TestCafe</a>. When writing such tests (or any tests for that matter) you might find yourself in a situation where you need to mock an external service. TestCafe allows mocking of services via its <a href=\"https://devexpress.github.io/testcafe/documentation/reference/test-api/requestmock/\">RequestMock class</a>.</p>\n<p>Setting up mocks to run before a series of tests is straight forward. For example, if you are testing a UI that is only accessible to authorized users, you can mock out the authorization request as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> RequestMock<span class=\"token punctuation\">,</span> Selector <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'testcafe'</span>\n\n<span class=\"token keyword\">const</span> authMock <span class=\"token operator\">=</span> <span class=\"token function\">RequestMock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">onRequestTo</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost/api/auth'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">respond</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    token<span class=\"token punctuation\">:</span> <span class=\"token string\">'abc123'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">fixtures</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Profile Page'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">page</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:3000/profile'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">requestHooks</span><span class=\"token punctuation\">(</span>authMock<span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"title":"TestCafe Request Hooks","date":"May 13, 2020","isTIL":true}}},"pageContext":{"slug":"/testcafe-request-hooks/","previous":{"fields":{"slug":"/mirage-js/"},"frontmatter":{"title":"Mirage.js"}},"next":{"fields":{"slug":"/testing-goals/"},"frontmatter":{"title":"Testing Goals"}}}}}